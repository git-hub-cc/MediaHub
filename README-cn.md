# 静态媒体库浏览器 (Static Media Library Browser)

这是一个纯前端、无后端的媒体库浏览器，旨在为您通过“小雅 AList”等方式组织的本地媒体资源提供一个美观、高效、类似 Netflix/Jellyfin 的浏览界面。

它通过预先生成的静态 JSON 数据文件来展示您的影视库，可以轻松部署在任何静态网页托管服务（如 GitHub Pages、Vercel）或简单的本地服务器上。



## ✨ 功能特性

*   **纯静态化**：无需复杂的后端服务，部署简单，运行快速。
*   **高性能浏览**：采用无限滚动技术，即使有数万个影视项目也能流畅加载。
*   **浏览器内缓存**：首次加载后，利用 IndexedDB 缓存元数据，后续访问和搜索速度极快。
*   **丰富的信息展示**：支持展示海报、电影背景、剧情简介、演职员、合集、制片公司、音视频规格等详细信息。
*   **强大的搜索与筛选**：支持对影视标题、简介、导演、演员等进行全文搜索，并可按合集、人物进行筛选。
*   **灵活的播放方式**：
    *   一键调用本地播放器（如 PotPlayer, VLC, IINA, MPV）进行播放。
    *   支持配置多个**轮询播放地址**，轻松在内网、外网或备用线路间切换。
*   **响应式设计**：完美适配桌面和移动设备。
*   **数据生成脚本**：提供完整的 Python 脚本，可一键扫描您的媒体库，自动生成所需的数据文件。

## 🚀 工作原理

本项目的核心思想是“前后端分离”，但将“后端”的工作前置化、静态化。

1.  **数据生成（一次性）**：使用提供的 Python 脚本扫描您的媒体库目录（例如“小雅”的 `all` 和 `config` 目录）。脚本会解析 `.nfo` 文件、查找图片等资源，并生成四个核心的 `.json` 数据文件。
2.  **前端加载**：当用户访问网页时，浏览器会下载这些静态的 `.json` 文件，作为其数据源。
3.  **索引与交互**：
    *   前端应用将加载到的数据渲染成美观的影视墙。
    *   用户可以选择在“设置”中**构建索引**。这会进一步解析所有 NFO 数据并存入浏览器的 IndexedDB 中，为高级搜索和筛选提供动力。
    *   所有交互，包括搜索、筛选、查看详情，都在浏览器端完成，响应迅速。

## ⚙️ 安装与设置指南

请遵循以下步骤来部署和使用您自己的媒体库浏览器。

### 1. 先决条件

*   安装了 **Python 3**。
*   拥有一个结构化的媒体库（如 **小雅 AList 资源**），其中包含 `all` 和 `config` 两个主要目录。这些目录里有 `.nfo`, `.strm`, `poster.jpg`, `fanart.jpg` 等文件。

### 2. 准备项目文件

首先，将本项目的所有文件（HTML, CSS, JS）下载或克隆到您的电脑上。然后，将您的媒体库目录放置或链接到项目根目录，形成如下结构：

```
/你的项目文件夹/
├── all/              <-- 你的媒体库主目录 (例如，小雅的'all'目录)
├── config/           <-- 你的媒体元数据目录 (例如，小雅的'config'目录)
├── data/             <-- 新建一个空目录，用于存放生成的JSON文件
├── js/
│   ├── main.js
│   ├── virtual-scroll.js
│   └── ...
├── style.css
├── index.html
├── generate_movies.py      <-- 下一步中创建的脚本
├── generate_people.py      <-- 下一步中创建的脚本
├── generate_collections.py <-- 下一步中创建的脚本
├── generate_studios.py     <-- 下一步中创建的脚本
└── README.md
```

**提示**：如果您的媒体库很大，建议使用符号链接（Symbolic Link）将 `all` 和 `config` 目录链接到项目文件夹，以避免复制大量文件。
*   **Windows (管理员权限)**: `mklink /D "all" "D:\路径\到\你的\all"`
*   **Linux / macOS**: `ln -s /路径/到/你的/all all`

### 3. 运行脚本生成数据

现在，打开终端（或命令行），`cd` 进入您的项目根目录，然后依次执行这四个脚本。这个过程可能需要几分钟，具体取决于您的媒体库大小。

```bash
python generate_movies.py
python generate_people.py
python generate_collections.py
python generate_studios.py
```

执行完毕后，检查 `data/` 目录下是否生成了 `movie_summary.json`, `people_summary.json`, `collections_summary.json` 和 `studios_summary.json` 四个文件。

### 4. 启动并访问

由于浏览器安全策略的限制，您不能直接通过 `file://` 协议打开 `index.html`。您需要一个本地 Web 服务器来运行它。

1.  在项目根目录的终端中，运行以下命令：
    ```bash
    # 如果你有 Python 3
    python -m http.server
    
    # 你也可以指定一个端口，例如 8000
    python -m http.server 8000
    ```
2.  打开您的浏览器，访问 `http://localhost:8000` (如果使用了上面的命令)。
3.  现在您应该能看到您的媒体库了！

## 🧑‍💻 使用说明

### 构建元数据索引

为了获得最佳的搜索和筛选体验，强烈建议您在首次访问时构建元数据索引。

1.  点击页面右下角的 **设置按钮 (⚙️)**。
2.  在弹出的侧边栏中，找到“元数据索引”部分。
3.  点击 **构建/重建索引** 按钮。
4.  等待处理完成。该过程会将所有 NFO 文件的详细信息缓存在您的浏览器中，以后无需重复此操作（除非您的媒体库有重大更新）。

### 配置播放路径

strm 文件中的播放地址默认为 `http://xiaoya.host:5678`。如果您的访问地址不同（例如内网IP `http://192.168.1.10:5678` 或公网域名 `http://my-nas.com`），您可以在设置中添加自己的地址。

1.  点击 **设置按钮 (⚙️)**。
2.  在“资源播放路径”部分，您可以看到一个列表。
3.  点击 **+ 新增路径** 来添加一个或多个您的访问地址。
4.  设置会自动保存。

**工作方式**：当您点击播放时，程序会从您配置的地址列表中**轮流选择一个**来替换 `.strm` 文件中的默认前缀，从而实现线路的切换和备用。